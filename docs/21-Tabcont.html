<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Introduction à la statistique bivariée avec R - 7&nbsp; Tableau de contingence</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./31-GraphBase.html" rel="next">
<link href="./13-Anova.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="site_libs/quarto-contrib/bookup_fonts_embed-0.0/fonts-download.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "Pas de résultats",
    "search-matching-documents-text": "documents trouvés",
    "search-copy-link-title": "Copier le lien vers la recherche",
    "search-hide-matches-text": "Cacher les correspondances additionnelles",
    "search-more-match-text": "correspondance de plus dans ce document",
    "search-more-matches-text": "correspondances de plus dans ce document",
    "search-clear-button-title": "Effacer",
    "search-detached-cancel-button-title": "Annuler",
    "search-submit-button-title": "Envoyer",
    "search-label": "Recherche"
  }
}</script>


<link rel="stylesheet" href="css/tidyverse.css">
</head>

<body class="nav-sidebar docked">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./21-Tabcont.html">Statistique bivariée II : Y quali</a></li><li class="breadcrumb-item"><a href="./21-Tabcont.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Tableau de contingence</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Introduction à la statistique bivariée avec R</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/ClaudeGrasland/bivar2023/" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Download" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download"><i class="bi bi-download"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./introduction_R_bivarié.epub">
              <i class="bi bi-bi-journal pe-1"></i>
            Download ePub
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./introduction_R_bivarié.pdf">
              <i class="bi bi-bi-file-pdf pe-1"></i>
            Download PDF
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Basculer le mode sombre"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Basculer en mode lecteur">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Recherche"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">À propos de ce document</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Introduction à R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-PremierPas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Premier pas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-OfficeKiller.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Office Killer</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-Base.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">R-Base</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Statistique bivariée I : Y quanti</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-Corrélation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Corrélation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-Régression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Régression simple</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-Anova.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Analyse de variance</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Statistique bivariée II : Y quali</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21-Tabcont.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Tableau de contingence</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Représentations graphiques</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./31-GraphBase.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Graphiques avec R-Base</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./32-Ggplot2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Graphiques avec ggplot2</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Aller plus loin</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text">Annexes</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./XX-ressources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Ressources</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Sur cette page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">7.1</span> Introduction</a></li>
  <li><a href="#préparation-des-données" id="toc-préparation-des-données" class="nav-link" data-scroll-target="#préparation-des-données"><span class="header-section-number">7.2</span> Préparation des données</a>
  <ul class="collapse">
  <li><a href="#importation-du-fichier-au-format-.rds" id="toc-importation-du-fichier-au-format-.rds" class="nav-link" data-scroll-target="#importation-du-fichier-au-format-.rds"><span class="header-section-number">7.2.1</span> Importation du fichier au format .RDS</a></li>
  <li><a href="#simplifiée-des-variables" id="toc-simplifiée-des-variables" class="nav-link" data-scroll-target="#simplifiée-des-variables"><span class="header-section-number">7.2.2</span> (simplifiée) des variables</a></li>
  <li><a href="#résumé-des-variables-tri-à-plat" id="toc-résumé-des-variables-tri-à-plat" class="nav-link" data-scroll-target="#résumé-des-variables-tri-à-plat"><span class="header-section-number">7.2.3</span> Résumé des variables (tri à plat)</a></li>
  <li><a href="#tailles-des-échantillons-par-pays-et-par-date" id="toc-tailles-des-échantillons-par-pays-et-par-date" class="nav-link" data-scroll-target="#tailles-des-échantillons-par-pays-et-par-date"><span class="header-section-number">7.2.4</span> Tailles des échantillons par pays et par date</a></li>
  <li><a href="#sélection-dun-échantillon" id="toc-sélection-dun-échantillon" class="nav-link" data-scroll-target="#sélection-dun-échantillon"><span class="header-section-number">7.2.5</span> Sélection d’un échantillon</a></li>
  <li><a href="#recodage-des-modalités" id="toc-recodage-des-modalités" class="nav-link" data-scroll-target="#recodage-des-modalités"><span class="header-section-number">7.2.6</span> Recodage des modalités</a></li>
  <li><a href="#découpage-de-variables-quantitatives-en-classes" id="toc-découpage-de-variables-quantitatives-en-classes" class="nav-link" data-scroll-target="#découpage-de-variables-quantitatives-en-classes"><span class="header-section-number">7.2.7</span> Découpage de variables quantitatives en classes</a></li>
  <li><a href="#sélection" id="toc-sélection" class="nav-link" data-scroll-target="#sélection"><span class="header-section-number">7.2.8</span> Sélection</a></li>
  </ul></li>
  <li><a href="#opinion-usa" id="toc-opinion-usa" class="nav-link" data-scroll-target="#opinion-usa"><span class="header-section-number">7.3</span> Opinion USA</a>
  <ul class="collapse">
  <li><a href="#la-fonction-table" id="toc-la-fonction-table" class="nav-link" data-scroll-target="#la-fonction-table"><span class="header-section-number">7.3.1</span> la fonction table()</a></li>
  <li><a href="#visualisation-avec-plot-ou-barplot" id="toc-visualisation-avec-plot-ou-barplot" class="nav-link" data-scroll-target="#visualisation-avec-plot-ou-barplot"><span class="header-section-number">7.3.2</span> Visualisation avec plot ou barplot</a></li>
  <li><a href="#recodage" id="toc-recodage" class="nav-link" data-scroll-target="#recodage"><span class="header-section-number">7.3.3</span> Recodage</a></li>
  <li><a href="#calcul-de-lintervalle-de-confiance" id="toc-calcul-de-lintervalle-de-confiance" class="nav-link" data-scroll-target="#calcul-de-lintervalle-de-confiance"><span class="header-section-number">7.3.4</span> Calcul de l’intervalle de confiance</a></li>
  <li><a href="#prise-en-compte-de-la-variable-de-redressement." id="toc-prise-en-compte-de-la-variable-de-redressement." class="nav-link" data-scroll-target="#prise-en-compte-de-la-variable-de-redressement."><span class="header-section-number">7.3.5</span> Prise en compte de la variable de redressement.</a></li>
  </ul></li>
  <li><a href="#opinion-usa-sexe" id="toc-opinion-usa-sexe" class="nav-link" data-scroll-target="#opinion-usa-sexe"><span class="header-section-number">7.4</span> Opinion USA / Sexe</a>
  <ul class="collapse">
  <li><a href="#tableau-de-contingence" id="toc-tableau-de-contingence" class="nav-link" data-scroll-target="#tableau-de-contingence"><span class="header-section-number">7.4.1</span> tableau de contingence</a></li>
  <li><a href="#pourcentages" id="toc-pourcentages" class="nav-link" data-scroll-target="#pourcentages"><span class="header-section-number">7.4.2</span> Pourcentages</a></li>
  <li><a href="#première-visualisation" id="toc-première-visualisation" class="nav-link" data-scroll-target="#première-visualisation"><span class="header-section-number">7.4.3</span> Première visualisation</a></li>
  <li><a href="#test-du-chi-2" id="toc-test-du-chi-2" class="nav-link" data-scroll-target="#test-du-chi-2"><span class="header-section-number">7.4.4</span> test du chi-2</a></li>
  <li><a href="#analyse-des-résidus" id="toc-analyse-des-résidus" class="nav-link" data-scroll-target="#analyse-des-résidus"><span class="header-section-number">7.4.5</span> Analyse des résidus</a></li>
  </ul></li>
  <li><a href="#opinion-usa-âge" id="toc-opinion-usa-âge" class="nav-link" data-scroll-target="#opinion-usa-âge"><span class="header-section-number">7.5</span> Opinion USA / Âge</a>
  <ul class="collapse">
  <li><a href="#effet-de-génération" id="toc-effet-de-génération" class="nav-link" data-scroll-target="#effet-de-génération"><span class="header-section-number">7.5.1</span> Effet de génération</a></li>
  <li><a href="#effet-dâge" id="toc-effet-dâge" class="nav-link" data-scroll-target="#effet-dâge"><span class="header-section-number">7.5.2</span> Effet d’âge</a></li>
  </ul></li>
  <li><a href="#opinion-usa-age-sexe" id="toc-opinion-usa-age-sexe" class="nav-link" data-scroll-target="#opinion-usa-age-sexe"><span class="header-section-number">7.6</span> Opinion USA / Age &amp; Sexe</a>
  <ul class="collapse">
  <li><a href="#sous-échantillon-des-hommes" id="toc-sous-échantillon-des-hommes" class="nav-link" data-scroll-target="#sous-échantillon-des-hommes"><span class="header-section-number">7.6.1</span> Sous-échantillon des hommes</a></li>
  <li><a href="#sous-échantillon-des-femmes" id="toc-sous-échantillon-des-femmes" class="nav-link" data-scroll-target="#sous-échantillon-des-femmes"><span class="header-section-number">7.6.2</span> Sous-échantillon des femmes</a></li>
  <li><a href="#régression-logistique" id="toc-régression-logistique" class="nav-link" data-scroll-target="#régression-logistique"><span class="header-section-number">7.6.3</span> Régression logistique</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/ClaudeGrasland/bivar2023/edit/main/21-Tabcont.qmd" class="toc-action">Modifier cette page</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Tableau de contingence</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="cell">
<div class="cell-output-display">
<p><img src="resources/figures/chap7_intro.gif" class="img-fluid"></p>
</div>
</div>
<ul>
<li><strong>Mise en place</strong> : Télécharger le <a href="https://github.com/ClaudeGrasland/bivar2023/raw/main/resources/exos/exo7.zip">dossier exo7</a> et décompressez le sur votre ordinateur. Puis ouvrez le projet R <code>exo6.Rproj</code> dans Rstudio.</li>
</ul>
<section id="introduction" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">7.1</span> Introduction</h2>
<p>On propose ici une démarche simplifiée de l’analyse d’enquête utilisant les fonctions R-base et quelques fonctions supplémentaires issues du package <strong>questionR</strong> qui permettent de simplifier l’écriture des programmes. Les explications détaillées se trouvent dans le très beau site web analyse-R auquel ont notamment contribué Julien Barnier et Joseph Larmarange.</p>
<p>https://larmarange.github.io/analyse-R/</p>
<p>ce programme suffit pour des analyses simples de questionnaires. Mais pour des analyses plus avancées, il faudra utiliser des packages plus avancés comme <strong>survey</strong>.</p>
</section>
<section id="préparation-des-données" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="préparation-des-données"><span class="header-section-number">7.2</span> Préparation des données</h2>
<section id="importation-du-fichier-au-format-.rds" class="level3" data-number="7.2.1">
<h3 data-number="7.2.1" class="anchored" data-anchor-id="importation-du-fichier-au-format-.rds"><span class="header-section-number">7.2.1</span> Importation du fichier au format .RDS</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>don<span class="ot">&lt;-</span><span class="fu">readRDS</span>(<span class="st">"resources/data/pew/Pew_2007_2017.Rdata"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(don)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [62,060 × 10] (S3: tbl_df/tbl/data.frame)
 $ survey      : Factor w/ 2 levels "Spring2007","Spring2017": 1 1 1 1 1 1 1 1 1 1 ...
 $ country     : Factor w/ 30 levels "Argentina","Brazil",..: 5 5 5 5 5 5 5 5 5 5 ...
 $ sex         : Factor w/ 2 levels "Male","Female": 1 2 1 1 2 1 1 1 1 2 ...
 $ age         : num [1:62060] 50 79 43 74 78 36 42 61 21 41 ...
 $ today       : Factor w/ 5 levels "1.Typical","2.Particularly good",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ use_internet: Factor w/ 4 levels "1.Yes","2.No",..: 1 2 1 2 2 1 1 2 1 1 ...
 $ opi_USA     : Factor w/ 6 levels "1.Very favorable",..: 3 2 3 1 2 1 2 2 2 2 ...
 $ opi_CHN     : Factor w/ 6 levels "1.Very favorable",..: 3 2 3 3 3 2 2 3 2 2 ...
 $ opi_RUS     : Factor w/ 6 levels "1.Very favorable",..: 3 2 2 3 3 2 2 3 3 2 ...
 $ weight      : num [1:62060] 1.009 0.954 0.996 0.989 0.982 ...
  ..- attr(*, "label")= chr "Weighting factor"
  ..- attr(*, "format.spss")= chr "F9.6"
  ..- attr(*, "display_width")= int 10</code></pre>
</div>
</div>
</section>
<section id="simplifiée-des-variables" class="level3" data-number="7.2.2">
<h3 data-number="7.2.2" class="anchored" data-anchor-id="simplifiée-des-variables"><span class="header-section-number">7.2.2</span> (simplifiée) des variables</h3>
<p>Les données sont issues de deux vagues de la <em>Global attitude Survey</em> réalisée par le Pew Research Center en 2007 et 2017. Nous avons conservé uniquement des variables communes aux deux enquêtes et posées de façon identique.</p>
<ul>
<li>survey : date d’enquête (2007 ou 2017)</li>
<li>country : lieu d’enquête (pays présents aux deux dates)</li>
<li>sex : sexe de l’individu</li>
<li>age : âge de l’individu<br>
</li>
<li>today : état d’esprit du jour (typique, très bon, très mauvais)</li>
<li>use_internet: usage d’internet</li>
<li>opi_USA : opinion sur les USA</li>
<li>opi_CHN : opinion sur la Chine</li>
<li>opi_RUS : opinion sur la Russie</li>
<li>weight : poids de l’individu pour les redressements</li>
</ul>
</section>
<section id="résumé-des-variables-tri-à-plat" class="level3" data-number="7.2.3">
<h3 data-number="7.2.3" class="anchored" data-anchor-id="résumé-des-variables-tri-à-plat"><span class="header-section-number">7.2.3</span> Résumé des variables (tri à plat)</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(don)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        survey               country          sex             age       
 Spring2007:28061   India        : 4499   Male  :30125   Min.   :18.00  
 Spring2017:33999   United States: 3472   Female:31935   1st Qu.:28.00  
                    Lebanon      : 2552                  Median :40.00  
                    Jordan       : 2548                  Mean   :42.59  
                    South Africa : 2295                  3rd Qu.:55.00  
                    Nigeria      : 2202                  Max.   :97.00  
                    (Other)      :44492                                 
                 today             use_internet  
 1.Typical          :36554   1.Yes       :32385  
 2.Particularly good:20216   2.No        :25892  
 3.Particularly bad : 4775   3.Don't know:  232  
 4.Don't know       :  419   4.Refused   :   69  
 5.Refused          :   96   NA's        : 3482  
                                                 
                                                 
                   opi_USA                        opi_CHN     
 1.Very favorable      :10081   1.Very favorable      : 8002  
 2.Somewhat favorable  :21725   2.Somewhat favorable  :21860  
 3.Somewhat unfavorable:14502   3.Somewhat unfavorable:15097  
 4.Very unfavorable    :10629   4.Very unfavorable    : 8402  
 5.Don't know          : 4718   5.Don't know          : 8183  
 6.Refused             :  405   6.Refused             :  516  
                                                              
                   opi_RUS          weight        
 1.Very favorable      : 5650   Min.   : 0.02301  
 2.Somewhat favorable  :18105   1st Qu.: 0.65138  
 3.Somewhat unfavorable:16806   Median : 1.00000  
 4.Very unfavorable    :10144   Mean   : 1.00032  
 5.Don't know          :10719   3rd Qu.: 1.11834  
 6.Refused             :  636   Max.   :18.74950  
                                                  </code></pre>
</div>
</div>
</section>
<section id="tailles-des-échantillons-par-pays-et-par-date" class="level3" data-number="7.2.4">
<h3 data-number="7.2.4" class="anchored" data-anchor-id="tailles-des-échantillons-par-pays-et-par-date"><span class="header-section-number">7.2.4</span> Tailles des échantillons par pays et par date</h3>
<p>On examine la taille des échantillons collectés dans les différents pays</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(don<span class="sc">$</span>country,don<span class="sc">$</span>survey)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                
                 Spring2007 Spring2017
  Argentina             800       1012
  Brazil               1000       1007
  Canada                982       1000
  Chile                 800        987
  France               1004        996
  Germany              1000        995
  Ghana                 707       1129
  India                2040       2459
  Indonesia             995        996
  Israel                887       1050
  Italy                 501        899
  Japan                 762       1009
  Jordan               1000       1548
  Kenya                 997       1117
  Lebanon              1000       1552
  Mexico                828       1000
  Nigeria              1092       1110
  Peru                  800        998
  Poland                504       1142
  Russia                991       1002
  Senegal               700       1083
  South Africa         1000       1295
  South Korea           718       1010
  Spain                 500        995
  Sweden                996        996
  Tanzania              702       1061
  Turkey                971       1050
  United Kingdom        982       1028
  United States        1999       1473
  Venezuela             803       1000</code></pre>
</div>
</div>
</section>
<section id="sélection-dun-échantillon" class="level3" data-number="7.2.5">
<h3 data-number="7.2.5" class="anchored" data-anchor-id="sélection-dun-échantillon"><span class="header-section-number">7.2.5</span> Sélection d’un échantillon</h3>
<p>On décide par exemple d’analyser l’échantillon des réponses françaises en 2017 :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>fra17<span class="ot">&lt;-</span>don[don<span class="sc">$</span>country <span class="sc">==</span><span class="st">"France"</span> <span class="sc">&amp;</span> don<span class="sc">$</span>survey<span class="sc">==</span><span class="st">"Spring2017"</span>,]</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>source <span class="ot">&lt;-</span> <span class="st">"Source : Pew Research Center, Global Attitude Survey, 2017, France"</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fra17)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        survey         country        sex           age       
 Spring2007:  0   France   :996   Male  :502   Min.   :18.00  
 Spring2017:996   Argentina:  0   Female:494   1st Qu.:40.00  
                  Brazil   :  0                Median :54.00  
                  Canada   :  0                Mean   :52.55  
                  Chile    :  0                3rd Qu.:66.00  
                  Germany  :  0                Max.   :94.00  
                  (Other)  :  0                               
                 today           use_internet                   opi_USA   
 1.Typical          :685   1.Yes       :868   1.Very favorable      : 45  
 2.Particularly good:245   2.No        :127   2.Somewhat favorable  :383  
 3.Particularly bad : 54   3.Don't know:  1   3.Somewhat unfavorable:353  
 4.Don't know       : 12   4.Refused   :  0   4.Very unfavorable    :190  
 5.Refused          :  0                      5.Don't know          : 25  
                                              6.Refused             :  0  
                                                                          
                   opi_CHN                      opi_RUS        weight      
 1.Very favorable      : 47   1.Very favorable      : 40   Min.   :0.1830  
 2.Somewhat favorable  :360   2.Somewhat favorable  :309   1st Qu.:0.3459  
 3.Somewhat unfavorable:381   3.Somewhat unfavorable:385   Median :0.6281  
 4.Very unfavorable    :168   4.Very unfavorable    :241   Mean   :0.9987  
 5.Don't know          : 40   5.Don't know          : 21   3rd Qu.:1.1900  
 6.Refused             :  0   6.Refused             :  0   Max.   :4.1079  
                                                                           </code></pre>
</div>
</div>
</section>
<section id="recodage-des-modalités" class="level3" data-number="7.2.6">
<h3 data-number="7.2.6" class="anchored" data-anchor-id="recodage-des-modalités"><span class="header-section-number">7.2.6</span> Recodage des modalités</h3>
<p>Si l’on souhaite rendre un rapport en français, on va recoder les modalités des variables qui nous intéressent et en profiter pour déclarer manquantes les valeurs correspondant à des non-réponses ou des refus de répondre.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(fra17<span class="sc">$</span>sex)<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"Homme"</span>,<span class="st">"Femme"</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(fra17<span class="sc">$</span>today)<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"Typique"</span>,<span class="st">"Très Bon"</span>,<span class="st">"Très Mauvais"</span>,<span class="cn">NA</span>,<span class="cn">NA</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(fra17<span class="sc">$</span>use_internet)<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"Oui"</span>,<span class="st">"Non"</span>,<span class="cn">NA</span>,<span class="cn">NA</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(fra17<span class="sc">$</span>opi_USA)<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"Trés Fav."</span>,<span class="st">"Fav."</span>,<span class="st">"Défav."</span>,<span class="st">"Très Déf."</span>,<span class="cn">NA</span>,<span class="cn">NA</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(fra17<span class="sc">$</span>opi_RUS)<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"Trés Fav."</span>,<span class="st">"Fav."</span>,<span class="st">"Défav."</span>,<span class="st">"Très Déf."</span>,<span class="cn">NA</span>,<span class="cn">NA</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(fra17<span class="sc">$</span>opi_CHN)<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"Trés Fav."</span>,<span class="st">"Fav."</span>,<span class="st">"Défav."</span>,<span class="st">"Très Déf."</span>,<span class="cn">NA</span>,<span class="cn">NA</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="découpage-de-variables-quantitatives-en-classes" class="level3" data-number="7.2.7">
<h3 data-number="7.2.7" class="anchored" data-anchor-id="découpage-de-variables-quantitatives-en-classes"><span class="header-section-number">7.2.7</span> Découpage de variables quantitatives en classes</h3>
<p>On peut transformer la variable quantitative âge en variable qualitative (factor) à l’aide de la fonction <em>cut()</em>. La question va évidemment être de décider :</p>
<ul>
<li>combien on fait de classes ?</li>
<li>selon quels seuils ?</li>
<li>avec quels noms ?</li>
</ul>
<p>On peut décider de créer cinq classesd’âge à l’aide des quintiles de la distribution :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>fra17<span class="sc">$</span>age5<span class="ot">&lt;-</span><span class="fu">cut</span>(fra17<span class="sc">$</span>age, <span class="at">breaks =</span> <span class="fu">quantile</span>(fra17<span class="sc">$</span>age,<span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.6</span>,<span class="fl">0.8</span>, <span class="dv">1</span>)), <span class="at">include.lowest =</span> T)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(fra17<span class="sc">$</span>age5) <span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"18-36 ans"</span>,<span class="st">"37-49 ans"</span>,<span class="st">"50-59 ans"</span>,<span class="st">"60-68 ans"</span>,<span class="st">"69-94-ans"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Mais on peut aussi décider qu’on veut travailler sur les générations en choisissant les dates de 1949, 1969 et 1989</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>fra17<span class="sc">$</span>gen<span class="ot">&lt;-</span><span class="dv">2017</span><span class="sc">-</span>fra17<span class="sc">$</span>age</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>fra17<span class="sc">$</span>gen4<span class="ot">&lt;-</span><span class="fu">cut</span>(fra17<span class="sc">$</span>gen, <span class="at">breaks=</span><span class="fu">c</span>(<span class="fu">min</span>(fra17<span class="sc">$</span>gen), <span class="dv">1949</span>, <span class="dv">1969</span>, <span class="dv">1989</span>, <span class="fu">max</span>(fra17<span class="sc">$</span>gen)), <span class="at">include.lowest =</span> T)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(fra17<span class="sc">$</span>gen4)<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">" 1950&lt; "</span>,<span class="st">"1950-69"</span>,<span class="st">"1970-89"</span>,<span class="st">"&gt; 1990"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="sélection" class="level3" data-number="7.2.8">
<h3 data-number="7.2.8" class="anchored" data-anchor-id="sélection"><span class="header-section-number">7.2.8</span> Sélection</h3>
<p>On ne garde que les variable qui nous intéressent pour l’analyse.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>sel<span class="ot">&lt;-</span>fra17[,<span class="fu">c</span>(<span class="st">"sex"</span>,<span class="st">"age5"</span>,<span class="st">"gen4"</span>,<span class="st">"opi_USA"</span>,<span class="st">"weight"</span>)]</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(sel)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    sex             age5          gen4          opi_USA        weight      
 Homme:502   18-36 ans:212    1950&lt; :218   Trés Fav.: 45   Min.   :0.1830  
 Femme:494   37-49 ans:187   1950-69:407   Fav.     :383   1st Qu.:0.3459  
             50-59 ans:199   1970-89:264   Défav.   :353   Median :0.6281  
             60-68 ans:203   &gt; 1990 :107   Très Déf.:190   Mean   :0.9987  
             69-94-ans:195                 NA's     : 25   3rd Qu.:1.1900  
                                                           Max.   :4.1079  </code></pre>
</div>
</div>
</section>
</section>
<section id="opinion-usa" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="opinion-usa"><span class="header-section-number">7.3</span> Opinion USA</h2>
<section id="la-fonction-table" class="level3" data-number="7.3.1">
<h3 data-number="7.3.1" class="anchored" data-anchor-id="la-fonction-table"><span class="header-section-number">7.3.1</span> la fonction table()</h3>
<p>Le dénombrement des modalités d’une variable se fait généralement avec la fonction <code>table()</code> qui permet de croiser une ou plusieurs variables. Ci-dessous on donne des exemples de croisement à une, deux ou trois variables</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>t1<span class="ot">&lt;-</span><span class="fu">table</span>(sel<span class="sc">$</span>opi_USA)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(t1)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Var1</th>
<th style="text-align: right;">Freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Trés Fav.</td>
<td style="text-align: right;">45</td>
</tr>
<tr class="even">
<td style="text-align: left;">Fav.</td>
<td style="text-align: right;">383</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Défav.</td>
<td style="text-align: right;">353</td>
</tr>
<tr class="even">
<td style="text-align: left;">Très Déf.</td>
<td style="text-align: right;">190</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>t2<span class="ot">&lt;-</span><span class="fu">table</span>(sel<span class="sc">$</span>opi_USA,sel<span class="sc">$</span>sex)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(t2)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">Homme</th>
<th style="text-align: right;">Femme</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Trés Fav.</td>
<td style="text-align: right;">27</td>
<td style="text-align: right;">18</td>
</tr>
<tr class="even">
<td style="text-align: left;">Fav.</td>
<td style="text-align: right;">204</td>
<td style="text-align: right;">179</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Défav.</td>
<td style="text-align: right;">164</td>
<td style="text-align: right;">189</td>
</tr>
<tr class="even">
<td style="text-align: left;">Très Déf.</td>
<td style="text-align: right;">97</td>
<td style="text-align: right;">93</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>t3<span class="ot">&lt;-</span><span class="fu">table</span>(sel<span class="sc">$</span>opi_USA,sel<span class="sc">$</span>sex,sel<span class="sc">$</span>gen4)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(t3)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Var1</th>
<th style="text-align: left;">Var2</th>
<th style="text-align: left;">Var3</th>
<th style="text-align: right;">Freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Trés Fav.</td>
<td style="text-align: left;">Homme</td>
<td style="text-align: left;">1950&lt;</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">Fav.</td>
<td style="text-align: left;">Homme</td>
<td style="text-align: left;">1950&lt;</td>
<td style="text-align: right;">39</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Défav.</td>
<td style="text-align: left;">Homme</td>
<td style="text-align: left;">1950&lt;</td>
<td style="text-align: right;">37</td>
</tr>
<tr class="even">
<td style="text-align: left;">Très Déf.</td>
<td style="text-align: left;">Homme</td>
<td style="text-align: left;">1950&lt;</td>
<td style="text-align: right;">31</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Trés Fav.</td>
<td style="text-align: left;">Femme</td>
<td style="text-align: left;">1950&lt;</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Fav.</td>
<td style="text-align: left;">Femme</td>
<td style="text-align: left;">1950&lt;</td>
<td style="text-align: right;">26</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Défav.</td>
<td style="text-align: left;">Femme</td>
<td style="text-align: left;">1950&lt;</td>
<td style="text-align: right;">41</td>
</tr>
<tr class="even">
<td style="text-align: left;">Très Déf.</td>
<td style="text-align: left;">Femme</td>
<td style="text-align: left;">1950&lt;</td>
<td style="text-align: right;">31</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Trés Fav.</td>
<td style="text-align: left;">Homme</td>
<td style="text-align: left;">1950-69</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">Fav.</td>
<td style="text-align: left;">Homme</td>
<td style="text-align: left;">1950-69</td>
<td style="text-align: right;">78</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Défav.</td>
<td style="text-align: left;">Homme</td>
<td style="text-align: left;">1950-69</td>
<td style="text-align: right;">71</td>
</tr>
<tr class="even">
<td style="text-align: left;">Très Déf.</td>
<td style="text-align: left;">Homme</td>
<td style="text-align: left;">1950-69</td>
<td style="text-align: right;">33</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Trés Fav.</td>
<td style="text-align: left;">Femme</td>
<td style="text-align: left;">1950-69</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: left;">Fav.</td>
<td style="text-align: left;">Femme</td>
<td style="text-align: left;">1950-69</td>
<td style="text-align: right;">73</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Défav.</td>
<td style="text-align: left;">Femme</td>
<td style="text-align: left;">1950-69</td>
<td style="text-align: right;">82</td>
</tr>
<tr class="even">
<td style="text-align: left;">Très Déf.</td>
<td style="text-align: left;">Femme</td>
<td style="text-align: left;">1950-69</td>
<td style="text-align: right;">43</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Trés Fav.</td>
<td style="text-align: left;">Homme</td>
<td style="text-align: left;">1970-89</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: left;">Fav.</td>
<td style="text-align: left;">Homme</td>
<td style="text-align: left;">1970-89</td>
<td style="text-align: right;">57</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Défav.</td>
<td style="text-align: left;">Homme</td>
<td style="text-align: left;">1970-89</td>
<td style="text-align: right;">40</td>
</tr>
<tr class="even">
<td style="text-align: left;">Très Déf.</td>
<td style="text-align: left;">Homme</td>
<td style="text-align: left;">1970-89</td>
<td style="text-align: right;">25</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Trés Fav.</td>
<td style="text-align: left;">Femme</td>
<td style="text-align: left;">1970-89</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">Fav.</td>
<td style="text-align: left;">Femme</td>
<td style="text-align: left;">1970-89</td>
<td style="text-align: right;">51</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Défav.</td>
<td style="text-align: left;">Femme</td>
<td style="text-align: left;">1970-89</td>
<td style="text-align: right;">55</td>
</tr>
<tr class="even">
<td style="text-align: left;">Très Déf.</td>
<td style="text-align: left;">Femme</td>
<td style="text-align: left;">1970-89</td>
<td style="text-align: right;">15</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Trés Fav.</td>
<td style="text-align: left;">Homme</td>
<td style="text-align: left;">&gt; 1990</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">Fav.</td>
<td style="text-align: left;">Homme</td>
<td style="text-align: left;">&gt; 1990</td>
<td style="text-align: right;">30</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Défav.</td>
<td style="text-align: left;">Homme</td>
<td style="text-align: left;">&gt; 1990</td>
<td style="text-align: right;">16</td>
</tr>
<tr class="even">
<td style="text-align: left;">Très Déf.</td>
<td style="text-align: left;">Homme</td>
<td style="text-align: left;">&gt; 1990</td>
<td style="text-align: right;">8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Trés Fav.</td>
<td style="text-align: left;">Femme</td>
<td style="text-align: left;">&gt; 1990</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Fav.</td>
<td style="text-align: left;">Femme</td>
<td style="text-align: left;">&gt; 1990</td>
<td style="text-align: right;">29</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Défav.</td>
<td style="text-align: left;">Femme</td>
<td style="text-align: left;">&gt; 1990</td>
<td style="text-align: right;">11</td>
</tr>
<tr class="even">
<td style="text-align: left;">Très Déf.</td>
<td style="text-align: left;">Femme</td>
<td style="text-align: left;">&gt; 1990</td>
<td style="text-align: right;">4</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="visualisation-avec-plot-ou-barplot" class="level3" data-number="7.3.2">
<h3 data-number="7.3.2" class="anchored" data-anchor-id="visualisation-avec-plot-ou-barplot"><span class="header-section-number">7.3.2</span> Visualisation avec plot ou barplot</h3>
<p>Les objets de type table à une ou deux dimensions s’affichent facilement avec barplot()</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(t1, <span class="at">main=</span><span class="st">"Opinion sur les USA"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="21-Tabcont_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(t2, <span class="at">main =</span> <span class="st">"Opinion sur les USA et Sexe"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="21-Tabcont_files/figure-html/unnamed-chunk-11-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="recodage" class="level3" data-number="7.3.3">
<h3 data-number="7.3.3" class="anchored" data-anchor-id="recodage"><span class="header-section-number">7.3.3</span> Recodage</h3>
<p>On peut regrouper des modalités entre elle en leur donnant le même nom et en éliminer d’autres en leur donnant la modalité NA.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>sel<span class="sc">$</span>opi_USA2<span class="ot">&lt;-</span>sel<span class="sc">$</span>opi_USA</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(sel<span class="sc">$</span>opi_USA2)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Trés Fav." "Fav."      "Défav."    "Très Déf."</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(sel<span class="sc">$</span>opi_USA2)<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"Favorable"</span>,<span class="st">"Favorable"</span>,<span class="st">"Défavorable"</span>,<span class="st">"Défavorable"</span>,<span class="cn">NA</span>,<span class="cn">NA</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>t<span class="ot">&lt;-</span><span class="fu">table</span>(sel<span class="sc">$</span>opi_USA2)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>t</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  Favorable Défavorable 
        428         543 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(t)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  Favorable Défavorable 
  0.4407827   0.5592173 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="dv">100</span><span class="sc">*</span>t<span class="sc">/</span><span class="fu">sum</span>(t))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="21-Tabcont_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>A ce stade, on a certes établi le fait qu’il y a une proportion plus grande d’opinion défavorables (56%) que favorables (44%) mais il faut établir un intervalle de confiance pour savoir si cela est simplement dû au biais d’écdhantillonage.</p>
</section>
<section id="calcul-de-lintervalle-de-confiance" class="level3" data-number="7.3.4">
<h3 data-number="7.3.4" class="anchored" data-anchor-id="calcul-de-lintervalle-de-confiance"><span class="header-section-number">7.3.4</span> Calcul de l’intervalle de confiance</h3>
<p>On va conduire un test pour trancher entre trois possibilités :</p>
<ul>
<li>opinion majoritairement favorable aux USA</li>
<li>opinion majoritairement défavorable aux USA</li>
<li>opinion partagée sans majorité claire</li>
</ul>
<p>On se fixe un intervalle de confiance de 95% (risque d’erreur de 5%)</p>
<p>On se reportera pour plus de détails à :</p>
<p>https://larmarange.github.io/analyse-R/intervalles-de-confiance.html</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.test</span>(t)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    1-sample proportions test with continuity correction

data:  t, null probability 0.5
X-squared = 13.384, df = 1, p-value = 0.0002538
alternative hypothesis: true p is not equal to 0.5
95 percent confidence interval:
 0.4093399 0.4726998
sample estimates:
        p 
0.4407827 </code></pre>
</div>
</div>
<p>Il semble donc que l’on puisse conclure que <strong>les français sont majoritairement défavorables aux USA</strong> puisque la proportion d’opinion favorbales est de 44% avec un intervalle de confiance compris entre 40.9 et 47.3 d’opinion favorable (pour un risque d’erreur p&lt;0.05)</p>
</section>
<section id="prise-en-compte-de-la-variable-de-redressement." class="level3" data-number="7.3.5">
<h3 data-number="7.3.5" class="anchored" data-anchor-id="prise-en-compte-de-la-variable-de-redressement."><span class="header-section-number">7.3.5</span> Prise en compte de la variable de redressement.</h3>
<p>On a toutefois oublié de tenir compte de la variable de redressement (<em>poids</em>) qui tient compte du fit que l’échantillonage obtenu comportait des sur et sous-représentations de certaines cétégories de population. Du coup, il faut réécrire l’ensemble du programme en utilisant l’instruction <strong>wtd.table</strong> du package <strong>questionr</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>t<span class="ot">&lt;-</span><span class="fu">wtd.table</span>(sel<span class="sc">$</span>opi_USA2, <span class="at">weights=</span>sel<span class="sc">$</span>weight)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>t</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Favorable Défavorable 
   462.4494    510.0442 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(t)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Favorable Défavorable 
  0.4755295   0.5244705 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.test</span>(t)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    1-sample proportions test with continuity correction

data:  t, null probability 0.5
X-squared = 2.2325, df = 1, p-value = 0.1351
alternative hypothesis: true p is not equal to 0.5
95 percent confidence interval:
 0.4437896 0.5074651
sample estimates:
        p 
0.4755295 </code></pre>
</div>
</div>
<p>On voit que la proportion d’opinion favorable est plus élevée après redressement (47.6%) ce qui du coup modifie l’intervalle de confiance (44.4% à 50.7%) et ne permet plus d’exclure l’hypothèse que l’opinion favorable soit en fait majoritaire. On concluera donc que <strong>L’opinion des français sur les USA en 2017 est partagée</strong>.</p>
</section>
</section>
<section id="opinion-usa-sexe" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="opinion-usa-sexe"><span class="header-section-number">7.4</span> Opinion USA / Sexe</h2>
<p>On choisit d’analyser la relation entre l’avis sur les USA et le sexe et on pose H0 : il n’y a pas de relation entre les deux variables.</p>
<section id="tableau-de-contingence" class="level3" data-number="7.4.1">
<h3 data-number="7.4.1" class="anchored" data-anchor-id="tableau-de-contingence"><span class="header-section-number">7.4.1</span> tableau de contingence</h3>
<p>On commence par recoder les deux variables puis par créer le tableau de contingence pondéré par la variable de pondération. On l’affiche en ajoutant les sommes en ligne et en colonnes avec <em>addmargins()</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(sel<span class="sc">$</span>sex) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Homme"</span>,<span class="st">"Femme"</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>tabcont<span class="ot">&lt;-</span><span class="fu">wtd.table</span>(sel<span class="sc">$</span>sex,sel<span class="sc">$</span>opi_USA2, <span class="at">weights =</span> sel<span class="sc">$</span>weight)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>tabcont</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Favorable Défavorable
Homme  238.0424    231.8120
Femme  224.4070    278.2321</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">addmargins</span>(tabcont)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Favorable Défavorable      Sum
Homme  238.0424    231.8120 469.8544
Femme  224.4070    278.2321 502.6391
Sum    462.4494    510.0442 972.4936</code></pre>
</div>
</div>
</section>
<section id="pourcentages" class="level3" data-number="7.4.2">
<h3 data-number="7.4.2" class="anchored" data-anchor-id="pourcentages"><span class="header-section-number">7.4.2</span> Pourcentages</h3>
<p>On peut calculer trois tableaux de pourcentage différents à l’aide des fonctions <strong>lprop</strong>, <strong>cprop</strong> et <strong>prop</strong> du package <em>questionr</em>. On se contentera d’afficher le tableau des % en lignes pusique c’est celui qui donne la répartition des avis défavorables eyt favorables pour chaque sexe.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lprop</span>(tabcont)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Favorable Défavorable Total
Homme  50.7      49.3       100.0
Femme  44.6      55.4       100.0
All    47.6      52.4       100.0</code></pre>
</div>
</div>
<ul>
<li>Commentaire : On constate que les femmes sont a priori moins favorables aux USA (44.6%) que les hommes (50.7%) mais il est difficile d’affirmer à ce stade que la relation est significative.</li>
</ul>
</section>
<section id="première-visualisation" class="level3" data-number="7.4.3">
<h3 data-number="7.4.3" class="anchored" data-anchor-id="première-visualisation"><span class="header-section-number">7.4.3</span> Première visualisation</h3>
<p>Onpeut visualiser notre table avec plot()</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(tabcont, <span class="at">col=</span><span class="fu">c</span>(<span class="st">"lightyellow"</span>,<span class="st">"lightblue"</span>), </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a> <span class="co">#    main=titre, </span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">sub=</span>source, </span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>     )</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="21-Tabcont_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="test-du-chi-2" class="level3" data-number="7.4.4">
<h3 data-number="7.4.4" class="anchored" data-anchor-id="test-du-chi-2"><span class="header-section-number">7.4.4</span> test du chi-2</h3>
<p>On réalise le test du chi-2 avec la fonction <strong>chisq.test()</strong> qui crée un objet complexe qui rappelle celui qui est créé par <strong>lm()</strong> pour la régression.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>toto<span class="ot">&lt;-</span><span class="fu">chisq.test</span>(tabcont)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>toto</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's Chi-squared test with Yates' continuity correction

data:  tabcont
X-squared = 3.2885, df = 1, p-value = 0.06977</code></pre>
</div>
</div>
<p>Ici, la relation est presque significative (p = 0.07). On ne peut pas rejeter H0 avec un risque d’erreur inférerieur à 5% mais on pourrait le faire pour un risque d’erreur de 10%.</p>
</section>
<section id="analyse-des-résidus" class="level3" data-number="7.4.5">
<h3 data-number="7.4.5" class="anchored" data-anchor-id="analyse-des-résidus"><span class="header-section-number">7.4.5</span> Analyse des résidus</h3>
<p>Lorsque la relation est significative, l’analyse des résidus permet de voir quelles sont les cases présentent des anomalies significatives. On peut pour cela imprimer quatre tableaux correspondant aux valeurs observées, aux valeurs attendues, aux écarts entre les deux (résidus bruts) et à un test sur les écarts les plus significatifs (résidus standardisés).</p>
<p>ce que l’on peut aussi faire graphiquement</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(toto<span class="sc">$</span>observed,<span class="at">caption =</span> <span class="st">"Valeurs observées"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Valeurs observées</caption>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">Favorable</th>
<th style="text-align: right;">Défavorable</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Homme</td>
<td style="text-align: right;">238.0424</td>
<td style="text-align: right;">231.8120</td>
</tr>
<tr class="even">
<td style="text-align: left;">Femme</td>
<td style="text-align: right;">224.4070</td>
<td style="text-align: right;">278.2321</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(toto<span class="sc">$</span>expected,  <span class="at">caption =</span> <span class="st">"Valeurs attendues"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Valeurs attendues</caption>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">Favorable</th>
<th style="text-align: right;">Défavorable</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Homme</td>
<td style="text-align: right;">223.4296</td>
<td style="text-align: right;">246.4248</td>
</tr>
<tr class="even">
<td style="text-align: left;">Femme</td>
<td style="text-align: right;">239.0198</td>
<td style="text-align: right;">263.6194</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(tabcont<span class="sc">-</span>toto<span class="sc">$</span>expected, <span class="at">caption =</span> <span class="st">"Résidus bruts"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Résidus bruts</caption>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">Favorable</th>
<th style="text-align: right;">Défavorable</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Homme</td>
<td style="text-align: right;">14.61274</td>
<td style="text-align: right;">-14.61274</td>
</tr>
<tr class="even">
<td style="text-align: left;">Femme</td>
<td style="text-align: right;">-14.61274</td>
<td style="text-align: right;">14.61274</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(toto<span class="sc">$</span>stdres, <span class="at">caption=</span> <span class="st">"Résidus standardisés"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Résidus standardisés</caption>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">Favorable</th>
<th style="text-align: right;">Défavorable</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Homme</td>
<td style="text-align: right;">1.877656</td>
<td style="text-align: right;">-1.877656</td>
</tr>
<tr class="even">
<td style="text-align: left;">Femme</td>
<td style="text-align: right;">-1.877656</td>
<td style="text-align: right;">1.877656</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>On peut aussi visualiser graphiquement les résidus standardisés avec avec <code>mosaicplot()</code> et l’option <em>shade=T</em>. Seules les cases ayant des résidus standardisés supérieures à +2 ou inférieurs à -2 seront colorées, ce qui revient à visualiser uniquement les anomalies significatives avec un risque d’erreur p&lt; 0.05.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mosaicplot</span>(tabcont,<span class="at">shade=</span>T)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="21-Tabcont_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="opinion-usa-âge" class="level2" data-number="7.5">
<h2 data-number="7.5" class="anchored" data-anchor-id="opinion-usa-âge"><span class="header-section-number">7.5</span> Opinion USA / Âge</h2>
<p>Supposons qu’on veuille analyser la relation entre l’opinion sur les USA et l’effet des classes d’âge ou des génération. Les deux variables age5 et gen4 sont issuesde la même variable mais elle n’ont pas le même sens d’un point de vue thématique</p>
<section id="effet-de-génération" class="level3" data-number="7.5.1">
<h3 data-number="7.5.1" class="anchored" data-anchor-id="effet-de-génération"><span class="header-section-number">7.5.1</span> Effet de génération</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>tabcont<span class="ot">&lt;-</span><span class="fu">wtd.table</span>(sel<span class="sc">$</span>gen4,sel<span class="sc">$</span>opi_USA2, <span class="at">weights=</span>sel<span class="sc">$</span>poids)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `poids`.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in wtd.table(sel$gen4, sel$opi_USA2, weights = sel$poids): no weights
argument given, using uniform weights of 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">addmargins</span>(tabcont),<span class="dv">1</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        Favorable Défavorable Sum
 1950&lt;         72         140 212
1950-69       167         229 396
1970-89       121         135 256
&gt; 1990         68          39 107
Sum           428         543 971</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lprop</span>(tabcont)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        Favorable Défavorable Total
 1950&lt;   34.0      66.0       100.0
1950-69  42.2      57.8       100.0
1970-89  47.3      52.7       100.0
&gt; 1990   63.6      36.4       100.0
All      44.1      55.9       100.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(tabcont, <span class="at">col=</span><span class="fu">c</span>(<span class="st">"lightyellow"</span>,<span class="st">"lightblue"</span>), </span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">main=</span><span class="st">"Opinion sur les USA selon la génération"</span>, </span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">sub=</span>source, </span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>     )</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="21-Tabcont_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>On remarque que l’opinion sur les USA semble de plus en plus positive au fur et à mesure des générations. Mais il faut tester pour voir si cet effet est significatif.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>titi<span class="ot">&lt;-</span><span class="fu">chisq.test</span>(tabcont)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>titi</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's Chi-squared test

data:  tabcont
X-squared = 26.901, df = 3, p-value = 6.175e-06</code></pre>
</div>
</div>
<p>On obtient donc une relation très significative (Chi-2 = 26.9 , degrés de liberté =3, p &lt; 0.001) entre la génération des personnes et leur opinion sur les USA. L’étude des résidus standardisés montre que cette relation est liée au fait que les générations récentes sont beaucoup plus favorables aux USA que les générations anciennes. On peut visualiser la relation avec la fonction mosaicplot(shaded=T)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mosaicplot</span>(tabcont, <span class="at">shade =</span> T)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="21-Tabcont_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="effet-dâge" class="level3" data-number="7.5.2">
<h3 data-number="7.5.2" class="anchored" data-anchor-id="effet-dâge"><span class="header-section-number">7.5.2</span> Effet d’âge</h3>
<p>Aurions nous tiré les mêmes conclusions en prenant un âge en 5 classes ?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>tabcont<span class="ot">&lt;-</span><span class="fu">wtd.table</span>(sel<span class="sc">$</span>age5,sel<span class="sc">$</span>opi_USA2, <span class="at">weights=</span>sel<span class="sc">$</span>poids)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `poids`.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in wtd.table(sel$age5, sel$opi_USA2, weights = sel$poids): no weights
argument given, using uniform weights of 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">addmargins</span>(tabcont),<span class="dv">1</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Favorable Défavorable Sum
18-36 ans       123          87 210
37-49 ans        80         101 181
50-59 ans        84         109 193
60-68 ans        75         120 195
69-94-ans        66         126 192
Sum             428         543 971</code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lprop</span>(tabcont)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Favorable Défavorable Total
18-36 ans  58.6      41.4       100.0
37-49 ans  44.2      55.8       100.0
50-59 ans  43.5      56.5       100.0
60-68 ans  38.5      61.5       100.0
69-94-ans  34.4      65.6       100.0
All        44.1      55.9       100.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(tabcont, <span class="at">col=</span><span class="fu">c</span>(<span class="st">"lightyellow"</span>,<span class="st">"lightblue"</span>), </span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">main=</span><span class="st">"Opinion sur les USA selon l'âge"</span>, </span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">sub=</span>source, </span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>     )</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="21-Tabcont_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>titi<span class="ot">&lt;-</span><span class="fu">chisq.test</span>(tabcont)</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>titi</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's Chi-squared test

data:  tabcont
X-squared = 27.75, df = 4, p-value = 1.402e-05</code></pre>
</div>
</div>
<p>On voit que la relation serait tout aussi significative et montrerait une variation continue de l’avius sur les USA avec l’âge, mais avec une opposition particulière des moins de 36 ans et des plus de 68 ans.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mosaicplot</span>(tabcont, <span class="at">shade =</span> T)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="21-Tabcont_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="opinion-usa-age-sexe" class="level2" data-number="7.6">
<h2 data-number="7.6" class="anchored" data-anchor-id="opinion-usa-age-sexe"><span class="header-section-number">7.6</span> Opinion USA / Age &amp; Sexe</h2>
<p>On va se limiter au cas où l’on veut étudier la relation entre X et Y toutes choses égales quant à l’effet d’une troisième variable Z qui sert de <strong>variable de contrôle</strong>.</p>
<p>Par exemple, on veut savoir s’il existe un lien entre l’âge (X) et l’avis sur les USA (Y) demeure valable aussi bien pour les hommes que pour les femmes (Z).</p>
<section id="sous-échantillon-des-hommes" class="level3" data-number="7.6.1">
<h3 data-number="7.6.1" class="anchored" data-anchor-id="sous-échantillon-des-hommes"><span class="header-section-number">7.6.1</span> Sous-échantillon des hommes</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>hom<span class="ot">&lt;-</span>sel[sel<span class="sc">$</span>sex<span class="sc">==</span><span class="st">"Homme"</span>,]</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>tabcont<span class="ot">&lt;-</span><span class="fu">wtd.table</span>(hom<span class="sc">$</span>age5,hom<span class="sc">$</span>opi_USA2)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in wtd.table(hom$age5, hom$opi_USA2): no weights argument given, using
uniform weights of 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">addmargins</span>(tabcont),<span class="dv">0</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Favorable Défavorable Sum
18-36 ans        65          49 114
37-49 ans        46          49  95
50-59 ans        39          46  85
60-68 ans        40          58  98
69-94-ans        41          59 100
Sum             231         261 492</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lprop</span>(tabcont)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Favorable Défavorable Total
18-36 ans  57.0      43.0       100.0
37-49 ans  48.4      51.6       100.0
50-59 ans  45.9      54.1       100.0
60-68 ans  40.8      59.2       100.0
69-94-ans  41.0      59.0       100.0
All        47.0      53.0       100.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chisq.test</span>(tabcont)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's Chi-squared test

data:  tabcont
X-squared = 7.6622, df = 4, p-value = 0.1048</code></pre>
</div>
</div>
<p>Dans le sous échantillon des 492 hommes, on n’observe pas de relation significative entre l’avis sur les USA et l’âge (Chi-2 = 7.6 pour 4 degré de liberté, p &gt; 0.10)</p>
</section>
<section id="sous-échantillon-des-femmes" class="level3" data-number="7.6.2">
<h3 data-number="7.6.2" class="anchored" data-anchor-id="sous-échantillon-des-femmes"><span class="header-section-number">7.6.2</span> Sous-échantillon des femmes</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>fem<span class="ot">&lt;-</span>sel[sel<span class="sc">$</span>sex<span class="sc">==</span><span class="st">"Femme"</span>,]</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>tabcont<span class="ot">&lt;-</span><span class="fu">wtd.table</span>(fem<span class="sc">$</span>age5,fem<span class="sc">$</span>opi_USA2)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in wtd.table(fem$age5, fem$opi_USA2): no weights argument given, using
uniform weights of 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">addmargins</span>(tabcont),<span class="dv">0</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Favorable Défavorable Sum
18-36 ans        58          38  96
37-49 ans        34          52  86
50-59 ans        45          63 108
60-68 ans        35          62  97
69-94-ans        25          67  92
Sum             197         282 479</code></pre>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lprop</span>(tabcont)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Favorable Défavorable Total
18-36 ans  60.4      39.6       100.0
37-49 ans  39.5      60.5       100.0
50-59 ans  41.7      58.3       100.0
60-68 ans  36.1      63.9       100.0
69-94-ans  27.2      72.8       100.0
All        41.1      58.9       100.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chisq.test</span>(tabcont)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's Chi-squared test

data:  tabcont
X-squared = 23.273, df = 4, p-value = 0.0001117</code></pre>
</div>
</div>
<p>Dans le sous échantillon des 479 femmes, on observe en revanche une relation très significative entre l’avis sur les USA et l’âge (Chi-2 = 23.3 pour 4 degré de liberté, p &lt; 0.001)</p>
</section>
<section id="régression-logistique" class="level3" data-number="7.6.3">
<h3 data-number="7.6.3" class="anchored" data-anchor-id="régression-logistique"><span class="header-section-number">7.6.3</span> Régression logistique</h3>
<p>La suite logique des analyses bivariées de variables qualitatives est la <strong>régression logistique</strong> qui permet de modéliser une variable qualitative binaire (Y) par un ensemble dr’autres variables qualitatives ou quantitatives (X1, X2, X3, …). Par exemple, on peut se demander si le fait d’être favorable ou très favorable aux USA (Y) dépend simultanément du sexe (X1) et de l’âge (X2).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>sel<span class="sc">$</span>opi_USA_fav<span class="ot">&lt;-</span>sel<span class="sc">$</span>opi_USA2<span class="sc">==</span><span class="st">"Favorable"</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>toto<span class="ot">&lt;-</span><span class="fu">glm</span>(sel<span class="sc">$</span>opi_USA_fav <span class="sc">~</span>  sel<span class="sc">$</span>sex <span class="sc">+</span> sel<span class="sc">$</span>age5 , <span class="at">family =</span> <span class="st">"binomial"</span>)</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(toto,<span class="at">test =</span> <span class="st">"Chisq"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Deviance Table

Model: binomial, link: logit

Response: sel$opi_USA_fav

Terms added sequentially (first to last)

         Df Deviance Resid. Df Resid. Dev  Pr(&gt;Chi)    
NULL                       970     1332.4              
sel$sex   1   3.3421       969     1329.1   0.06753 .  
sel$age5  4  27.4485       965     1301.7 1.613e-05 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(toto)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = sel$opi_USA_fav ~ sel$sex + sel$age5, family = "binomial")

Coefficients:
                  Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)         0.4517     0.1532   2.949  0.00319 ** 
sel$sexFemme       -0.2281     0.1317  -1.732  0.08328 .  
sel$age537-49 ans  -0.5771     0.2053  -2.811  0.00494 ** 
sel$age550-59 ans  -0.5853     0.2024  -2.892  0.00383 ** 
sel$age560-68 ans  -0.8097     0.2035  -3.978 6.94e-05 ***
sel$age569-94-ans  -0.9910     0.2070  -4.788 1.69e-06 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1332.4  on 970  degrees of freedom
Residual deviance: 1301.6  on 965  degrees of freedom
  (25 observations deleted due to missingness)
AIC: 1313.6

Number of Fisher Scoring iterations: 4</code></pre>
</div>
</div>
<p>Au bout du compte, l’effet principal demeure bien celui de l’âge. L’effet du sexe devient non significatif lorsque l’onb contrôle l’âge (p&gt;0.05). Les femmes sont moins favorables aux USA mais cet effet s’explique en partie au moins par leur plus grande longévité.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copié");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copié");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./13-Anova.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Analyse de variance</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./31-GraphBase.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Graphiques avec R-Base</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<script src="js/tidyverse.js"></script>



</body></html>